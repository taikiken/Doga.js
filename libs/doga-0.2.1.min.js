/**
 * @license inazumatv.com
 * @author (at)taikiken / http://inazumatv.com
 * @date 15/09/18 - 19:37
 *
 * Copyright (c) 2011-2015 inazumatv.com, inc.
 *
 * Distributed under the terms of the MIT license.
 * http://www.opensource.org/licenses/mit-license.html
 *
 * This notice shall be included in all copies or substantial portions of the Software.
 *
 * build: 2015-10-08 17:36:35
 * version: 0.2.1
 * url https://github.com/taikiken/doga.js
 */
var Doga=window.Doga||{};!function(t){"use strict";t.Doga.EventDispatcher=function(){function t(){}var e=t.prototype;return e.constructor=t,e.addEventListener=function(t,e){this.on(t,e)},e.on=function(t,e){if("undefined"!=typeof e){"undefined"==typeof this._listeners&&(this._listeners={});var n=this._listeners;"undefined"==typeof n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}},e.hasEventListener=function(t,e){var n=this._listeners;return"undefined"==typeof n?!1:"undefined"!=typeof e[t]&&-1!==n[t].indexOf(e)?!0:!1},e.removeEventListener=function(t,e){this.off(t,e)},e.off=function(t,e){var n,i,s=this._listeners;"undefined"!=typeof s&&(n=s[t],"undefined"!=typeof n&&(i=n.indexOf(e),-1!==i&&n.splice(i,1)))},e.dispatchEvent=function(t){var e,n,i,s,r=this._listeners;if("undefined"!=typeof r&&"undefined"!=typeof t.type&&(e=r[t.type],"undefined"!=typeof e))for(t.target=this,i=0,s=e.length;s>i;i=i+1|0)n=e[i],n&&n.call(this,t)},t.initialize=function(t){t.addEventListener=e.addEventListener,t.on=e.on,t.hasEventListener=e.hasEventListener,t.removeEventListener=e.removeEventListener,t.off=e.off,t.dispatchEvent=e.dispatchEvent},t}()}(window),function(t){"use strict";t.Doga.Cue=function(){function t(){this.points=[],this.cue={}}var e=t.prototype;return e.constructor=t,e.init=function(){var t,e,n,i,s=this.points,r=this.cue;for(n=0,i=s.length;i>n;n=n+1|0)t=s[n],r.hasOwnProperty(t)?r[t].end=t:r[t]={start:t,end:null,fire:!1},e&&(r[e].end=t),e=t;r[t].end=Number.MAX_VALUE},e.reset=function(t){var e,n,i,s=this.points,r=this.cue;for(n=t,i=s.length;i>n;n=n+1|0)e=s[n],r.hasOwnProperty(e)&&(r[e].fire=!1)},e.resetAll=function(){this.reset(0)},e.resetUnder=function(t){for(var e,n=this.points,i=this.cue,s=n.length-1,r=Math.min(t,s);r>=0;r=r-1|0)e=n[r],e&&i.hasOwnProperty(e)&&(i[e].fire=!1)},e.canFire=function(t){var e=this.cue[t],n=!1;return e&&(n=e.fire),n},e.fired=function(t){this.cue[t].fire=!0},e.insect=function(t){var e,n,i,s,r,o=this.points,h=this.cue;for(s=0,r=o.length;r>s&&(n=o[s],!(n>t));s=s+1|0)if(i=h[n],t>=i.start&&t<i.end){e=i;break}return e},e.length=function(){return this.points.length},e.index=function(t){return t=1*t,this.points.indexOf(t)},e.has=function(t){return-1!==this.index(t)},e.range=function(t,e){var n,i,s,r=this.points,o=!1;for(e=e||Number.MAX_VALUE,i=0,s=r.length;s>i;i=i+1|0)if(n=r[i],n>=t&&e>=n){o=!0;break}return o},e.add=function(t){t=1*t,this.has(t)||(this.points.push(t),this.sort())},e.remove=function(t){t=1*t;var e=this.index(t);-1!==e&&(this.points.slice(e,1),this.sort())},e.sort=function(){this.length()>1&&this.points.sort(function(t,e){return t-e})},e.next=function(t){var e=null;return-1!==t&&(t+=1,t<this.length()&&(e=this.points[t])),e},e.nextByTime=function(t){return this.next(this.index(t))},e.distance=function(t){var e,n,i,s,r=this.points,o=0;for(i=0,s=r.length;s>i;i=i+1|0){if(n=r[i],n>=t){e={start:o,end:n};break}o=n}return e},e.prev=function(t){var e=null;return-1!==t&&(t-=1,t>=0&&(e=this.points[t])),e},e.prevByTime=function(t){return this.prev(this.index(t))},t}()}(window),function(t){"use strict";var e=t.document,n=t.Doga;n.Player=function(){function t(t,n){this.video=e.getElementById(t),this.playing=!1,this.loaded=!1,this.currentTime=0,this.duration=0,this.boundUpdate=this.update.bind(this),this.cue=n,this.boundLoad=this.onLoad.bind(this),this.boundEnded=this.onEnded.bind(this)}var i=n.EventDispatcher;t.LOADED="playerLoaded",t.UPDATE="playerUpdate",t.PLAY="playerPlayer",t.STOP="playerStop",t.END="playerEnd",t.CUE_POINT="playerCuePoint";var s=t.prototype;return s.constructor=t,i.initialize(s),s.init=function(){var t=this.cue,e=this.video;t&&t.init(),e&&e.addEventListener("loadeddata",this.boundLoad,!1)},s.onLoad=function(e){var n=this.video;n.removeEventListener("loadeddata",this.boundLoad),this.duration=n.duration,this.loaded=!0,this.dispatchEvent({type:t.LOADED,event:e})},s.onEnded=function(){this.dispatchEvent({type:t.END,event:event})},s.update=function(e){var n,i,s=this.video.currentTime,r=this.cue;this.currentTime=s,this.dispatchEvent({type:t.UPDATE,currentTime:s,event:e}),r&&(i=r.insect(s),i&&!i.fire&&(n=i.start,r.fired(n),this.dispatchEvent({type:t.CUE_POINT,time:n,currentTime:s,event:e})))},s.watch=function(){return this.video.addEventListener("timeupdate",this.boundUpdate,!1),this.video.addEventListener("ended",this.boundEnded,!1),this},s.unwatch=function(){return this.video.removeEventListener("timeupdate",this.boundUpdate),this.video.removeEventListener("ended",this.boundEnded),this},s.element=function(){return this.video},s.canSeekTo=function(t){var e=!1;return this.loaded&&(e=this.duration>t),e},s.stop=function(){return this.playing?(this.pause(),this.video.currentTime=0,this.cue.resetAll(),this):this},s.pause=function(){return this.playing?(this.unwatch(),this.video.pause(),this.playing=!1,this):this},s.play=function(){return this.playing?this:(this.watch(),this.video.play(),this.playing=!0,this)},s.seek=function(t){if(!this.canSeekTo(t))return this;var e,n=this.cue;return n&&(0===t?n.resetAll():(e=n.index(t),e>=0&&n.reset(e))),this.video.currentTime=t,this.play(),this},t}()}(window);